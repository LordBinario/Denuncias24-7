CREATE DATABASE DENUNCIAS247 COLLATE utf8_general_ci;

USE DENUNCIAS247;

CREATE TABLE DEPARTAMENTO
(
    ID_DEPTO INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    DEPTO VARCHAR(20) NOT NULL
) CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE USUARIO
(
    ID_USUARIO INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    ANONIMO TEXT NOT NULL,
    CORREO TEXT NOT NULL,
    ID_DEPTO INT NOT NULL,
    IMAGEN_PERFIL TEXT NOT NULL,
    FOREIGN KEY(ID_DEPTO) REFERENCES DEPARTAMENTO(ID_DEPTO)
) CHARACTER SET utf8  COLLATE utf8_general_ci;

CREATE TABLE TIPO_CONTRASEÑA
(
    ID_TIPO INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    TIPO VARCHAR(10) NOT NULL
) CHARACTER SET utf8  COLLATE utf8_general_ci;

CREATE TABLE CONTRASEÑAS
(
    ID_CONTRASEÑA INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    CONTRASEÑA LONGBLOB NOT NULL,
    ID_TIPO INT NOT NULL,
    ID_USUARIO INT NOT NULL,
    FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),
    FOREIGN KEY(ID_TIPO) REFERENCES TIPO_CONTRASEÑA(ID_TIPO)
) CHARACTER SET utf8  COLLATE utf8_general_ci;

CREATE TABLE DENUNCIAS
(
    ID_DENUNCIA INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    FECHA_PUBLICACION DATETIME NOT NULL,
    TITULO TEXT NOT NULL,
    DESCRIPCION TEXT NOT NULL,
    ID_USUARIO INT NOT NULL,
    FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)
) CHARACTER SET utf8  COLLATE utf8_general_ci;

CREATE TABLE ADJUNTES
(
    ID_ADJUNTE INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    ADJUNTE TEXT NOT NULL,
    ID_DENUNCIA INT NOT NULL,
    FOREIGN KEY(ID_DENUNCIA) REFERENCES DENUNCIAS(ID_DENUNCIA) ON DELETE CASCADE
) CHARACTER SET utf8  COLLATE utf8_general_ci;